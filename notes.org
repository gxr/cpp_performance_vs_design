
* Performance and Design
** What is Performance?
** Do you know your implementations performance?
** Do you know your hardware?
*** links
**** Sandy Bridge CPU layout
http://arstechnica.com/business/2010/09/intels-next-must-have-upgrade-a-look-at-sandy-bridge/
**** STARTED Ivy bridge CPU layout
http://arstechnica.com/business/2012/04/intels-tick-plus-third-generation-core-ivy-bridge-processors-hit-the-market/
**** STARTED Haswell bridge CPU layout
http://arstechnica.com/gadgets/2013/05/a-look-at-haswell/
** The case of the calibration
*** size of data to calibrate
**** madmax: Intel(R) Xeon(R) CPU E5-2640 0 @ 2.50GHz
|             | Total                                               | 1core / float32 | Comment         |
|-------------+-----------------------------------------------------+-----------------+-----------------|
| Core/Socket | 6                                                   |                 |                 |
| L1          | 6 x 32 KB instruction caches, 6 x 32 KB data caches |            8192 |                 |
| L2          | 6 x 256 KB                                          |           65536 |                 |
| L3          | 15 MB                                               |         3932160 | aka smart cache |
| RAM         | 64 GB                                               |                 | max     750 GB  |
**** 1 core: 32KB+256KB+15MB = 16023552 B = 4005888 float32
**** this is a volume of 159x159x159 float32
*** sum on very large arrays
**** TODO look-up number of cells of ATLAS calo
**** TODO use LogNormal or Normal-Distribution in 3D to do some scaling/calibration
***** 1/(r sigma sqrt(2*pi))exp((ln (r) - mu)^2/(2*sigma*sigma))
***** 1/(sigma sqrt(2*pi))exp((r - mu)^2/(2*sigma*sigma))
****** log/exp can only be emulated with SIMD
***** pol5 fit to 15k samples of normal PDF
****** fit results
***************************************
Minimizer is Linear
Chi2                      =      32.2417
NDf                       =           34
p0                        =      1225.51   +/-   26.2991     
p1                        =     -50.2466   +/-   84.9579     
p2                        =     -844.775   +/-   90.2873     
p3                        =      467.178   +/-   41.5544     
p4                        =     -95.9609   +/-   8.68852     
p5                        =       6.9906   +/-   0.678148
****** only use up to x<4.
***** pol5 fit to 60k samples of Gaus(x,0,160)
Minimizer is Linear
Chi2                      =  0.000834093
NDf                       =           44
p0                        =    0.0584334   +/-   0.17779     
p1                        =  7.97765e-05   +/-   0.00436486  
p2                        = -2.43077e-06   +/-   3.44763e-05 
p3                        =  8.28912e-09   +/-   1.16596e-07 
p4                        =  -1.1121e-11   +/-   1.7792e-10  
p5                        =  5.39762e-15   +/-   1.00937e-13
**** TODO provide benchmarks
***** naive C style
***** design = 1 Cell = 1 Object
*** SIMD
**** intro SIMD
**** is model of performance possible
*** Multi-threading
**** numa-effects
**** blocking
** architecture = C style
** optimise only what needs optimisation

* CRTP and Expression Templates
** TODO rewrite all code in terms of calibration example?

* Test-Driven ?
